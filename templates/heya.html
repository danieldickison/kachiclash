{% extends "base.html" %}

{% block main_id %}p-heya{% endblock %}

{% block subtitle %}
  {{heya.name}}
{% endblock %}

{% block head %}
  <script src="/static/js/heya.js" type="module"></script>
  {% if base.is_admin() || is_oyakata %}
    <script src="/static/js/heya-admin.js" type="module"></script>
  {% endif %}
  <link rel="stylesheet" href="/static/css/heya.css" />
{% endblock %}

{% block main %}
  <h1>{{heya.name}}</h1>

  {% if is_oyakata %}
    <form method="POST">
      <input type="text" name="set_name" value="{{heya.name}}">
      <button>Update</button>
    </form>
  {% endif %}

  <h2>Oyakata: {{heya.oyakata.render().unwrap()|safe}}</h2>

  <h2>Members</h2>
  <ul>
    {% for member in heya.members.as_ref().unwrap() %}
      <li>
        {{member.render().unwrap()|safe}}
        {% if is_oyakata %}
          <form method="POST">
            <input type="hidden" name="delete_player_id" value="{{member.id}}">
            <button>Expel</button>
          </form>
        {% endif %}
      </li>
    {% endfor %}
  </ul>

  <form method="POST">
    <label>player id: <input type="text" name="add_player_id"></label>
    <button>Recruit</button>
  </form>
{% endblock %}
